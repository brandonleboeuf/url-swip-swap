import{r as s,j as a,U as C,L as P,C as L,a as t,b as x,e as v,I as y,F as T,f as D,T as E,g as I,D as j,h as A,A as $,c as F,R as B,G as W}from"./global.0b8f86d6.js";const G=({id:o,index:d,topUrl:m,bottomUrl:u,checked:c,onRemove:k,onInputChange:h,isRemoveDisabled:g=!1})=>{const[e,r]=s.useState(!1),n=s.useRef(),i=()=>{!g&&!e&&(r(!0),n.current=window.setTimeout(()=>{k()},100))},l=!(m!=null&&m.trim())||!(u!=null&&u.trim()),U=p=>{if(l){p.preventDefault();return}h(p)};return s.useEffect(()=>{l&&c&&h({target:{type:"checkbox",name:"checked",checked:!1,id:`enabled-${o}`}})},[l,c,h,o]),s.useEffect(()=>()=>{n.current&&window.clearTimeout(n.current)},[]),a(C,{isRemoving:e,children:[a(P,{children:[a("h4",{children:["PAIR ",d+1]}),a(L,{children:[t("input",{type:"checkbox",id:`enabled-${o}`,name:"checked",checked:c&&!l,onChange:U,disabled:l}),t("label",{htmlFor:`enabled-${o}`,title:l?"Fill in both URLs to enable":""})]})]}),!g&&t(x,{onClick:i,disabled:e,title:"Remove this URL pair",children:"Remove"}),t(v,{children:"Primary URL:"}),t(y,{type:"text",id:`topUrl-${o}`,name:"topUrl",value:m,onChange:h,placeholder:"e.g., production.myapp.com"}),t(v,{children:"Alternative URL:"}),t(y,{type:"text",id:`bottomUrl-${o}`,name:"bottomUrl",value:u,onChange:h,placeholder:"e.g., localhost:3000"})]})},O=({version:o})=>a(T,{version:o,children:[a("div",{children:["Version: ",o]}),a("div",{children:["Created by ",t("a",{href:"https://github.com/brandonleboeuf",target:"_blank",rel:"noopener noreferrer",children:"Brandon"})]}),t("div",{children:"Est. 2024"})]}),S=()=>{const[o,d]=s.useState([]),[m,u]=s.useState("");s.useEffect(()=>{fetch(chrome.runtime.getURL("manifest.json")).then(e=>e.json()).then(e=>{u(e.version)}).catch(e=>console.error("Error fetching manifest.json:",e)),chrome.storage.sync.get(["optionSets"],({optionSets:e})=>{if((e==null?void 0:e.length)>0){const r=e.map(n=>({...n,id:n.id||crypto.randomUUID()}));d(r)}else d([{id:crypto.randomUUID(),topUrl:"",bottomUrl:"",checked:!1}])})},[]);const c=s.useCallback(e=>{chrome.storage.sync.set({optionSets:e})},[]),k=s.useCallback(()=>{d(e=>{const r=[...e,{id:crypto.randomUUID(),topUrl:"",bottomUrl:"",checked:!1}];return c(r),r})},[c]),h=s.useCallback(e=>{d(r=>{if(r.length<=1)return r;const n=r.filter(i=>i.id!==e);return c(n),n})},[c]),g=s.useCallback((e,r)=>{const{name:n,value:i,type:l,checked:U}=r.target;d(p=>{const R=p.map(f=>{if(f.id!==e)return f;const b={...f};if(l==="checkbox"){if(U&&(!f.topUrl.trim()||!f.bottomUrl.trim()))return f;b.checked=U}else n==="topUrl"?(b.topUrl=i,i.trim()||(b.checked=!1)):n==="bottomUrl"&&(b.bottomUrl=i,i.trim()||(b.checked=!1));return b});return c(R),R})},[c]);return a(D,{children:[t(E,{children:"url-swip-swap"}),t(I,{children:"Quick URL switching between environments"}),t(j,{children:"Configure URL pairs to quickly switch between different versions of your websites. Toggle the switch to enable/disable each pair."}),t(A,{id:"url-pairs",children:o.map((e,r)=>t(G,{id:e.id,index:r,topUrl:e.topUrl,bottomUrl:e.bottomUrl,checked:e.checked,onRemove:()=>h(e.id),onInputChange:n=>g(e.id,n),isRemoveDisabled:o.length<=1},e.id))}),t($,{id:"add-pair",onClick:k,children:"Add New URL Pair"}),t(O,{version:m})]})},w=document.getElementById("root");w&&F(w).render(a(B.StrictMode,{children:[t(W,{}),t(S,{})]}));
